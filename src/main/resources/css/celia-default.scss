/*
 * Celia default CSS
 * http://www.celia.fi/
 *
 * Author: Jukka Eerikäinen <jukka.eerikainen@iki.fi>
 */

$show-braille-page-numbers: true !default;
$show-print-page-numbers: false !default;

/*
 * Namespaces
 */
@namespace xml "http://www.w3.org/XML/1998/namespace";

/*
 * Hidden elements
 */
head {
	display: none;
}

/*
 * Hyphenation
 */
book {
	hyphens: auto;
}

/*
 * Page layout
 */
@if $show-braille-page-numbers {
	@page:left {
		@top-left {
			content: counter(page);
		}
	}

	@page:right {
		@top-right {
			content: counter(page);
		}
	}
}

/*
 * Generated title page
 * page-break-after: always adds an empty page afterwards
 */
#generated-title-page {
	display:block;
	page-break-before:always;
	page-break-after:always;
	page-break-inside:avoid;
	flow: title-page;
}

/*
 * Volumes: Maximum length, title page 
 */
@volume {
	max-length: 80;
	@begin {
		content: flow(title-page) flow(volume-toc);
		page: generated;
	}
}

#generated-volume-toc li a::after {
	content: ' ' leader('⠐') ' ' target-counter(attr(href), page);
	margin-left: 2;
	text-indent: -2;
}

@page generated:left {
	@top-left {
		content: none;
	}
}

@page generated:right {
	@top-right {
		content: none;
	}
}

/*
 * <p>s within frontmatter have top margins instead of indentation
 */
frontmatter p {
	margin-top: 1;
	text-indent: 0;
}

/*
 * Major structural divisions of the book
 *
 * Sections do not start on a new page.
 */
level,
level1, level2, level3,
level4, level5, level6,
frontmatter, bodymatter, rearmatter {
	display: block;
}

/*
 * Headings
 *
 * In headings that span multiple lines, every line except for the first
 * one is indented by 2 cells.
 */
hd, h1, h2, h3, h4, h5, h6 {
	display: block;
	margin-top: 1;
	margin-bottom: 1;
	margin-left: 2;
	text-indent: -2;
	page-break-after: avoid;
}

/*
 * Print page numbers
 * Default: no print page numbers
 */
@if $show-print-page-numbers {
	pagenum::before {
		content: 'Sivu ';
	}
	pagenum {
		display: block;
		margin-top: 1;
		margin-bottom: 1;
		margin-left: 2;
	}
}
@else {
	pagenum {
		display: none;
	}
}

/*
 * Title and author
 */
doctitle, docauthor {
	display: block;
	margin-bottom: 1;
}

/*
 * Paragraphs
 * Paragraphs are separated by indent of 2.
 */
p {
	display: block;
	text-indent: 2;
}

/*
 * Lists
 */
list {
	display: block;
}

/*
 * List items
 */
list > li {
	display: block;
}

/*
 * Producer notes
 */
prodnote {
	display: block;
}

prodnote::before {
	content: 'Tuottajan huomautus: ';
}

/*
 * Tables
 *
 * TODO: What should we do with these?
 */
table {
	display: block;
	margin-top: 1;
	margin-bottom: 1;
}

/*
 * Image groups
 *
 * TODO
 */
imggroup {

}

/*
 * Captions
 *
 * TODO
 */
caption {
	display: block;
}

/*
 * Code
 *
 * No hyphenation
 * To preserve whitespace, add attribute xml:space="preserve" to the XML element.
 */
code {
	display: block;
	hyphens: none;
}

/*
 * INLINE ELEMENTS
 */

/*
 * Strong emphasis as bold
 */
strong {
	text-transform: louis-bold;
}

/*
 * Emphasis as italic
 */
em {
	text-transform: louis-ital;
}

/*
 * Don't transform, avoid page breaks, preserve line breaks
 * Used for "Braille illustrations" (similarly
 * to ASCII graphics".
 */
.notransform {
	margin-left: 0;
	text-transform: none;
	page-break-inside: avoid;
	white-space: pre-wrap;
}

/*
 * Preceding empty line
 */
.precedingemptyline::before {
	/* Don't convert newlines to spaces */
	white-space: pre-line;
	content: '\A';
}

/*
 * pagebreakbefore
 */
.pagebreakbefore {
	page-break-before: always;
}

/*
 * pagebreakafter
 */
.pagebreakafter {
	page-break-after: always;
}

/*
 * Indented elements
 */
.indented {
	text-indent: 2;
}

/*
 * xml:space='preserve'
 *
 * Pre-formatted text
 */
[xml|space=preserve] {
	white-space: pre-wrap;
}
